\usepackage[most]{tcolorbox}
\tcbuselibrary{breakable,skins}
\tcbsetforeverylayer{shield externalize} % so that tcolorbox works with tikzexternalize

%\newcommand{\example}[2]{
%\begin{center}
%\begin{tcolorbox}
%	[title=#1,
%	title filled=false,
%	colframe=gray,
%	colback=gray!20!white]
%	#2
%\end{tcolorbox}
%\end{center}
%}
\definecolor{defgrn}{RGB}{123, 168, 124}
\definecolor{thmgrn}{RGB}{104, 184, 83}

\newcommand*\greenbox[1]{\colorbox{green!10!white}{\hspace{1em}#1\hspace{1em}}}
\newcommand*\redbox[1]{\colorbox{red!10!white}{\hspace{1em}#1\hspace{1em}}}
\newcommand*\bluebox[1]{\colorbox{blue!10!white}{\hspace{1em}#1\hspace{1em}}}

% Variables	
\newenvironment{variables}%		% Variables
  [1][~~]{%
  \begin{addmargin}[3em]{3em}
%		\begin{center}
  #1 
  \begin{tabular}[t]{>{$}l<{$} @{~~} l l}}
  {\end{tabular}\\
  [\belowdisplayskip]
  \end{addmargin}
%		\end{center}
  }
  
% THEOREM
\newtcolorbox[
    % auto counter,number within=section
    ]%
    {thm}[2][]{
	colback=white,
    colbacktitle=thmgrn,
	colframe=thmgrn!30!white,
	arc=0mm,
	fonttitle=\color{white},
    enhanced,
    attach boxed title to top left={yshift=-2mm,xshift=2mm},
    title=\textsc{Theorem:}~#2,
    #1
    }
    
% OPTIMISATION PROBLEM
\newtcolorbox[
    % auto counter,number within=section
    ]%
    {optProblem}[2][]{
	colback=white,
    colbacktitle=gray,
	colframe=gray,
	arc=0mm,
	fonttitle=\color{white},
    enhanced,
    attach boxed title to top left={yshift=-2mm,xshift=2mm},
    title={[OP] ~ #2},
    #1
    }
  
\newtcolorbox[
    auto counter,number within=chapter
    ]%
    {optExample}[2][]{
	colback=white,
    colbacktitle=gray!20!white,
	colframe=gray!10!white,
	arc=0mm,
	fonttitle=\color{blue!10!gray},
    enhanced,
    attach boxed title to top left={yshift=-2mm,xshift=2mm},
    title=\textsc{Ex.}~\thesection\thetcbcounter~#2,
    #1
    }

\newtcolorbox[
    % auto counter,number within=section
    ]%
    {defn}[2][]{
	colback=white,
    colbacktitle=defgrn,
	colframe=defgrn!30!white,
	arc=0mm,
	fonttitle=\color{white},
    enhanced,
    attach boxed title to top left={yshift=-2mm,xshift=2mm},
    title=\textsc{Def:}~#2,
    #1
    }
    
% \newenvironment{st}
%     {\begin{alignat*}{3}
%         \txt{s.t.} ~}
%     {\end{alignat*}}